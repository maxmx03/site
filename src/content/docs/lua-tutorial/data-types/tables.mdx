---
title: Tabelas
description: tabelas da linguagem lua
---

import { Aside, Tabs, TabItem, Code } from "@astrojs/starlight/components";

As tabelas em Lua são uma estrutura de dados extremamente versátil, podendo ser utilizadas tanto como arrays quanto como dicionários. Vejamos alguns exemplos para ilustrar esses casos:

## Arrays

Arrays são estruturas de dados que permitem armazenar uma coleção de elementos sequenciais, onde cada elemento é identificado por um índice numérico. Os arrays são implementados utilizando tabelas, onde os índices numéricos são utilizados para acessar os elementos da tabela.

export const codeArray = `
local meuArray = {"Primeiro elemento", "Segundo elemento", "Terceiro elemento"}

print(meuArray[1])
print(meuArray[2])
print(meuArray[3])
`

export const codeArrayOutput = `
Primeiro elemento
Segundo elemento
Terceiro elemento
`;

<Tabs>
  <TabItem label="lua">
    <Code code={codeArray} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={codeArrayOutput} lang="bash" />
  </TabItem>
</Tabs>

<Aside title="Nota">
  As tabelas são estruturadas com índices iniciando em 1, não em 0. Isso
  significa que o primeiro elemento de uma tabela é acessado pelo índice 1, o
  segundo elemento pelo índice 2 e assim por diante.
</Aside>

### Flexibilidade de Tipos

Uma das características interessantes dos arrays em Lua é a flexibilidade em relação aos tipos de dados armazenados. Ao contrário de algumas linguagens de programação, não é necessário que todos os elementos de um array em Lua sejam do mesmo tipo.

export const codeArrayFlexibility = `
local meuArray = {1, 2, true, "Lua"}

print(meuArray[1])
print(meuArray[2])
print(meuArray[3])
print(meuArray[4])
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeArrayFlexibility} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`1\n2\ntrue\nLua`} lang="bash" />
  </TabItem>
</Tabs>

### Adicionando Elementos

Em Lua, é possível adicionar novos elementos em um array de forma simples, sem a necessidade de utilizar funções específicas. Basta atribuir um valor a um novo índice do array.

export const codeArrayAppend = `
local meuArray = {}

meuArray[1] = "Primeiro elemento"
meuArray[2] = "Segundo elemento"
meuArray[3] = "Terceiro elemento"
meuArray[#meuArray + 1] = "Último elemento"

print(meuArray[1])
print(meuArray[2])
print(meuArray[3])
print(meuArray[4])
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeArrayAppend} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code
      code={`Primeiro elemento\nSegundo elemento\nTerceiro elemento\nUltimo elemento`}
      lang="bash"
    />
  </TabItem>
</Tabs>

### Percorrendo Arrays

Para percorrer um array em Lua, é possível utilizar um loop `for` com um índice numérico. O loop `for` é executado até que o índice atingir o último elemento do array.

export const codeArrayFor = `
local meuArray = {"Primeiro elemento", "Segundo elemento", "Terceiro elemento"}

for i = 1, #meuArray do
print(meuArray[i])
end
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeArrayFor} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code
      code={`Primeiro elemento\nSegundo elemento\nTerceiro elemento`}
      lang="bash"
    />
  </TabItem>
</Tabs>

<Aside title="Nota">
  O `#` é um operador que retorna o número de elementos em um array.
</Aside>

Outra forma conveniente de iterar em um array é utilizando a função `ipairs()`, que retorna pares índice-valor. Aqui está um exemplo:

export const codeArrayForInPairs = `
local meuArray = {"Primeiro elemento", "Segundo elemento", "Terceiro elemento"}

for i, v in ipairs(meuArray) do
print(i, v)
end
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeArrayForInPairs} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code
      code={`1\tPrimeiro elemento\n2\tSegundo elemento\n3\tTerceiro elemento`}
      lang="bash"
    />
  </TabItem>
</Tabs>

<Aside title="Nota">
  A função `ipairs()` retorna pares índice-valor, o que significa que o primeiro
  elemento da iteração é o índice do array, e o segundo elemento é o valor do
  elemento correspondente.
</Aside>

<Aside type="caution" title="Aviso">
  O lua também disponibiliza outras duas funções, `table.foreach` e
  `table.foreachi`, porém elas foram descontinuadas e não são mais recomendadas
  para uso
</Aside>

## Dicionários

Diferentes dos arrays, que utilizam índices numéricos, os dicionários são estruturas de dados que utilizam pares de chave e valor para armazenar informações. Os dicionários são frequentemente usados para representar objetos do mundo real.

export const codeDictionary = `
local meuDicionario = {
  nome = "Miliano",
  profissao = "Desenvolvedor",
}`;

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionary} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`Miliano\nDesenvolvedor`} lang="bash" />
  </TabItem>
</Tabs>

### Acessando Valores

Para acessar os valores de um dicionário, basta utilizar o nome da chave correspondente. O lua utiliza pontos para acessar as chaves de um dicionário.

export const codeDictionaryAccess = `
local meuDicionario = {
  nome = "Miliano",
  profissao = "Desenvolvedor",
}

print(meuDicionario.nome)
print(meuDicionario.profissao)
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionaryAccess} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`Miliano\nDesenvolvedor`} lang="bash" />
  </TabItem>
</Tabs>

### Alterando Valores

Para alterar os valores de um dicionário, basta utilizar o nome da chave correspondente. O lua utiliza pontos para acessar as chaves de um dicionário.

export const codeDictionaryChange = `
local meuDicionario = {
  nome = "Miliano",
  profissao = "Desenvolvedor",
}

meuDicionario["nome"] = "Fabricio"
meuDicionario["profissao"] = "Desenvolvedor de Jogos"

print(meuDicionario["nome"])
print(meuDicionario["profissao"])
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionaryChange} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`Fabricio\nDesenvolvedor de Jogos`} lang="bash" />
  </TabItem>
</Tabs>

### Adicionando Elementos

Para adicionar elementos a um dicionário, basta utilizar o nome da chave correspondente. O lua utiliza pontos para acessar as chaves de um dicionário.

export const codeDictionaryAppend = `
local meuDicionario = {}

meuDicionario["nome"] = "Fabricio"
meuDicionario["profissao"] = "Desenvolvedor de Jogos"

print(meuDicionario["nome"])
print(meuDicionario["profissao"])
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionaryAppend} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`Fabricio\nDesenvolvedor de Jogos`} lang="bash" />
  </TabItem>
</Tabs>

### Percorrendo Dicionários

Para percorrer um dicionário em Lua, é possível utilizar um loop `for` com um índice numérico. O loop `for` é executado até que o índice atingir o último elemento do dicionário.

export const codeDictionaryFor = `
local meuDicionario = {
  nome = "Miliano",
  profissao = "Desenvolvedor",
}

for chave, valor in pairs(meuDicionario) do
\tprint(chave, valor)
end
`

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionaryFor} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`nome\tMiliano\nprofissao\tDesenvolvedor`} lang="bash" />
  </TabItem>
</Tabs>

<Aside title="Nota">
  A função `pairs()` retorna pares chave-valor, o que significa que o primeiro
  elemento da iteração é a chave do dicionário, e o segundo elemento é o valor
  do elemento correspondente.
</Aside>

export const codeDictionaryForInPairs = `
local meuDicionario = {
  nome = "Miliano",
  profissao = "Desenvolvedor",
}

for i, v in ipairs(meuDicionario) do
\tprint(i, v)
end
`

<Aside type="caution" title="Aviso">
  Você não consegue usar `ipairs()` para iterar em um dicionário. Ele só tem
  deve ser utilizado para iterar em arrays.
  <Tabs>
    <TabItem label="lua">
      <Code code={codeDictionaryForInPairs} lang="lua" />
    </TabItem>
    <TabItem label="console">
      <Code code="null" lang="bash" />
    </TabItem>
  </Tabs>
</Aside>

### Navegando por um Dicionário

Quando tentamos acessar um índice de um dicionário que não existe, o lua retorna `nil`. Isso pode causar erros ao tentar acessar o valor de um índice inexistente.

Para evitar problemas podemos utilizar operadores lógicos para verificar se uma chave existe no dicionário.

export const codeDictionaryExists = `
local meuDicionario = {
  nome = "Fernando",
}
local idade = meuDicionario.idade or 22
print(idade)
`;

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionaryExists} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`22`} lang="bash" />
  </TabItem>
</Tabs>

Também podemos utilizar paresenteses junto com o operador lógico `or` para verificar se uma chave existe no dicionário.

export const codeDictionaryExists2 = `
local pessoa1 = {
  idade = 22,
}
local idade1 = ((pessoa1 or {}).idade or 24)
print(idade1)

local pessoa2 = {}
local idade2 = ((pessoa2 or {}).idade or 24)
print(idade2)
`;

<Tabs>
  <TabItem label="lua">
    <Code code={codeDictionaryExists2} lang="lua" />
  </TabItem>
  <TabItem label="console">
    <Code code={`22\n24`} lang="bash" />
  </TabItem>
</Tabs>
